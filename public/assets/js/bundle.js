!function(e){const t="2.6.6";console.log("UPO ver",t);localStorage.getItem("upo-version"),localStorage.getItem("upo-script");function o(e){var t=new Blob([e],{type:"application/javascript"}),o=URL.createObjectURL(t),n=document.createElement("script");n.src=o,n.type="text/javascript",document.head.append(n)}fetch("https://upo.the4.co/shopify/dist/js/app.js",{headers:{"Content-type":"text/plain"}}).then(e=>e.text()).then(e=>{localStorage.setItem("upo-version",t),localStorage.setItem("upo-script",e),o(e)}).catch(e=>{})}(window),function(){const e={init:function(){return!!document.querySelector("form[action*='/cart/add']:not(#product-form-installment)")||(alert("Can't find product form. Please contact app support"),!1)},getSelector:function(e){return e.classList.length?"."+e.className.split(" ").join("."):e.nodeName.toLowerCase()},picker:function(){let e=document.querySelector("form[action*='/cart/add']:not(#product-form-installment)");if(!this.init())return;e.style.boxShadow="red 0px 0px 1px 2px",window.scrollTo(0,e.offsetTop+e.clientHeight/2),e.addEventListener("submit",(function(e){e.preventDefault(),e.stopPropagation()})),e.addEventListener("onsubmit",(function(e){e.preventDefault(),e.stopPropagation()}));let t=e.querySelector(".nitro-upo");t&&(t.style.display="none!important");let o=e.querySelectorAll("*"),n=o.length,r=0,i=this;for(;r<n;r++)o[r].closest(".nitro-upo")||("BUTTON"===o[r].nodeName&&(window.jQuery?jQuery(o[r]).off("click"):o[r].disabled=!0),o[r].addEventListener("mouseover",(function(e){e.target.closest(".nitro-upo")||(e.target.style.boxShadow="blue 0px 0px 1px 2px")})),o[r].addEventListener("mouseout",(function(e){e.target.closest(".nitro-upo")||(e.target.style.boxShadow="0 0 0px 0px blue")})),o[r].removeEventListener("click",()=>{}),o[r].addEventListener("click",(function(e){if(e.preventDefault(),e.stopPropagation(),e.target!==this)return!1;if(!e.target.closest(".nitro-upo")&&confirm("Are you sure want to prepend to this box?")){let t=i.getSelector(e.target);e.target.parentElement&&"FORM"!==e.target.parentElement.nodeName&&(t=i.getSelector(e.target.parentElement)+" "+t),window.opener.postMessage({type:"finish",param:t,theme_id:Shopify.theme.id},"https://upo.the4.co"),setTimeout(window.close,500)}})))}};window.opener&&window.opener.postMessage({type:"init",param:null,domain:window.location.origin},"https://upo.the4.co"),window.addEventListener("message",(function(t){if("https://upo.the4.co"!==t.origin)return;let o=t.data;"object"==typeof o&&o&&o.type&&"function"==typeof e[o.type]&&e[o.type](o)}),!1)}(window),function(e){var t=window.XMLHttpRequest.prototype.send;function o(){if(this._onreadystatechange)return this._onreadystatechange.apply(this,arguments)}window.location.href.includes("/products/")&&(window.XMLHttpRequest.prototype.send=function(e){if(this.onreadystatechange&&(this._onreadystatechange=this.onreadystatechange),e instanceof FormData){let t,o=!1,n=[];for(t of e.keys())if(n.push(t),0===t.indexOf("properties")){o=!0;break}if(!o&&n.includes("id")){let t=document.querySelector("form .nitro-upo");if(t){t.querySelectorAll('[name^="properties"]').forEach(t=>{e.append(t.getAttribute("name"),t.value)})}}}else if("string"==typeof e){var n,r;let t=!1;try{n=JSON.parse(e),r=Object.keys(n);for(let e of r)if(0===e.indexOf("properties")){t=!0;break}if(!t&&r.includes("id")){let t=document.querySelector("form .nitro-upo");if(t){t.querySelectorAll('[name^="properties"]').forEach(e=>{n[e.getAttribute("name")]=e.value}),e=JSON.stringify(n)}}}catch(e){n=null,r=null,console.warn("Not is json",e.message)}if(!n)try{n=new URLSearchParams(e);for(let e of n.entries())if(0===e[0].indexOf("properties")){t=!0;break}if(!t&&e.includes("id=")){let t=document.querySelector("form .nitro-upo");if(t){t.querySelectorAll('[name^="properties"]').forEach(e=>{n[e.getAttribute("name")]=e.value,n.append(e.getAttribute("name"),e.value)}),e=n.toString()}}}catch(e){r=null,n=null,console.log("Invalid serialize",e.message)}}return this.onreadystatechange=o,t.apply(this,arguments)})}(window),function(e,t){"function"==typeof t&&(e.fetch=function(e,o){if(e.includes("/cart/add")&&o&&o.method&&"post"===o.method.toLowerCase())if(o.body instanceof FormData){let e,t=!1,n=[];for(e of o.body.keys())if(n.push(e),0===e.indexOf("properties")){t=!0;break}if(!t&&n.includes("id")){let e=document.querySelector("form .nitro-upo");if(e){e.querySelectorAll('[name^="properties"]').forEach(e=>{o.body.append(e.getAttribute("name"),e.value)})}}}else if("string"==typeof o.body){var n,r;try{n=JSON.parse(o.body),r=Object.keys(n);let e=!1;for(let t of r)if(0===t.indexOf("properties")){e=!0;break}if(!e&&r.includes("id")){let e=document.querySelector("form .nitro-upo");if(e){e.querySelectorAll('[name^="properties"]').forEach(e=>{n[e.getAttribute("name")]=e.value}),o.body=JSON.stringify(n)}}}catch(e){n=null,console.warn("Not is json",e.message)}if(!n)try{n=new URLSearchParams(o.body);for(let e of n.entries())if(0===e[0].indexOf("properties")){check=!0;break}if(!check&&o.body.includes("id=")){let e=document.querySelector("form .nitro-upo");if(e){e.querySelectorAll('[name^="properties"]').forEach(e=>{n[e.getAttribute("name")]=e.value,n.append(e.getAttribute("name"),e.value)}),o.body=n.toString()}}}catch(e){r=null,n=null,console.log("Invalid serialize",e.message)}}var i=t.apply(this,arguments);return i})}(window,window.fetch);